---
layout: post
title: "39. Generators and Async/Await"
date: 2025-12-22
authors: ["Jay Tak"]
categories: ["Development", "Javascript"]
description: Promiseë¥¼ í†µí•œ ë¹„ë™ê¸° íë¦„ì˜ êµ¬ì¡°í™”, async/awaitì— ì˜í•œ ê°€ë…ì„± ê°œì„ , ê·¸ë¦¬ê³  fetchë¥¼ í†µí•œ HTTP í†µì‹ ê³¼ ì—ëŸ¬ íŒë‹¨ì˜ ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬
thumbnail: "/assets/images/gen/blog/javascript.webp"
comments: false
subscribe: false
---

---

## 1. ì œë„ˆë ˆì´í„°ë€ ë¬´ì—‡ì¸ê°€

### 1.1 ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì •ì˜

ì œë„ˆë ˆì´í„°ëŠ” **ì‹¤í–‰ì„ ë©ˆì·„ë‹¤ê°€ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜**ë‹¤.

```js
function* gen() {
  yield 1;
  yield 2;
  yield 3;
}
```

- `function*` : ì œë„ˆë ˆì´í„° í•¨ìˆ˜
- `yield` : ê°’ì„ ë°˜í™˜í•˜ë©´ì„œ ì‹¤í–‰ì„ ì¤‘ë‹¨

<br>

### 1.2 ì¼ë°˜ í•¨ìˆ˜ì™€ì˜ ì°¨ì´

```js
function normal() {
  return 1;
}

function* generator() {
  yield 1;
}

normal();      // 1
generator();   // ì‹¤í–‰ âŒ â†’ ì œë„ˆë ˆì´í„° ê°ì²´ ë°˜í™˜ â­•
```

ğŸ‘‰ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í˜¸ì¶œí•´ë„ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.**

<br>

<hr style="border: 1px dashed #ccc;">

## 2. ì œë„ˆë ˆì´í„° ê°ì²´ì˜ ì •ì²´

### 2.1 ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°

```js
const g = generator();

typeof g.next; // "function"
Symbol.iterator in g; // true
```

- ì´í„°ëŸ¬ë¸”: `for...of` ê°€ëŠ¥
- ì´í„°ë ˆì´í„°: `next()`ë¥¼ ê°€ì§
- **ìê¸° ìì‹ ì´ ìê¸° ì´í„°ë ˆì´í„°**

<br>

### 2.2 next()ì˜ ë°˜í™˜ê°’

```js
g.next(); // { value: 1, done: false }
g.next(); // { value: undefined, done: true }
```

- `value`: yield ë˜ëŠ” return ê°’
- `done`: ì¢…ë£Œ ì—¬ë¶€

<br>

<hr style="border: 1px dashed #ccc;">
## 3. ì œë„ˆë ˆì´í„°ì˜ í•µì‹¬: ì¼ì‹œ ì¤‘ì§€ì™€ ì¬ê°œ

### 3.1 yieldëŠ” ë¬´ì—‡ì„ í•˜ëŠ”ê°€

```js
function* gen() {
  console.log('A');
  yield 1;
  console.log('B');
  yield 2;
}
```

```js
const g = gen();

g.next(); // A ì¶œë ¥, { value: 1, done: false }
g.next(); // B ì¶œë ¥, { value: 2, done: false }

```

ğŸ‘‰ **yieldëŠ” returnì´ ì•„ë‹ˆë¼ â€œì¤‘ë‹¨ ì§€ì â€ì´ë‹¤.**

<br>

### 3.2 next(value)ëŠ” ì–´ë””ë¡œ ì „ë‹¬ë˜ëŠ”ê°€

```js
function* gen() {
  const x = yield 1;
  const y = yield x + 10;
  return y;
}
```

{% include framework/shortcodes/figure.html src="/assets/images/gen/content/post_39/GeneratorExecutionFlow.webp" title="Generator Execution Flow" caption="JayTak" alt="Photo of JayTak" link="" target="" %}

ğŸ‘‰ **nextì˜ ì¸ìˆ˜ëŠ” â€œì´ì „ yieldì˜ ê²°ê³¼ê°’â€ì´ ëœë‹¤.**

<br>

<hr style="border: 1px dashed #ccc;">

## 4. ì œë„ˆë ˆì´í„°ì˜ í™œìš©

### 4.1 ì´í„°ëŸ¬ë¸” êµ¬í˜„ì„ ë‹¨ìˆœí™”

```js
// 1. ê¸°ì¡´ë°©ì‹
const iterable = {
  [Symbol.iterator]() {
    let i = 0;
    return {
      next() {
        return { value: i++, done: i > 3 };
      }
    };
  }
};

// 2. ì œë„ˆë ˆì´í„° ì‚¬ìš©
function* iterable() {
  yield 0;
  yield 1;
  yield 2;
}
```

ğŸ‘‰ **ì´í„°ë ˆì´ì…˜ ë¡œì§ì´ ëˆˆì— ë³´ì¸ë‹¤.**

<br>

### 4.2 ì œë„ˆë ˆì´í„°ë¡œ ë¹„ë™ê¸° íë¦„ ì œì–´

```js
function* fetchTodo() {
  const response = yield fetch(url);
  const todo = yield response.json();
  console.log(todo);
}
```

ì—¬ê¸°ì„œ `yield`ëŠ” Promiseë¥¼ ë°˜í™˜í•˜ê³ , ì™¸ë¶€ ì‹¤í–‰ê¸°ê°€ Promiseê°€ resolveë˜ë©´ `next()`ë¡œ ë‹¤ì‹œ ë°€ì–´ ë„£ëŠ”ë‹¤.

```js
result.value.then(res => onResolved(res));
```

ğŸ‘‰ ì´ êµ¬ì¡°ê°€ **async/awaitì˜ ì›í˜•**ì´ë‹¤.

<br>

<hr style="border: 1px dashed #ccc;">

## 5. async/awaitì˜ ë“±ì¥

### 5.1 async/awaitëŠ” ì œë„ˆë ˆì´í„°ì˜ ìƒìœ„ ì¶”ìƒí™”

```js
async function fetchTodo() {
  const response = await fetch(url);
  const todo = await response.json();
  console.log(todo);
}
```

{% include framework/shortcodes/figure.html src="/assets/images/gen/content/post_39/comparisonOfGeneratorAndAsyncAwait.webp" title="Comparison of function* / yield and async / await" caption="JayTak" alt="Photo of JayTak" link="" target="" %}

<br>

### 5.2 async í•¨ìˆ˜ì˜ ë³¸ì§ˆ

```js
async function foo() {
  return 1;
}

foo().then(console.log); // 1
```

- async í•¨ìˆ˜ëŠ” **í•­ìƒ Promiseë¥¼ ë°˜í™˜**
- return â†’ resolve
- throw â†’ reject

<br><br>

#### <span style="color:grey">reference: ëª¨ë˜ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive 46ì¥. Generator and async&await</span>
